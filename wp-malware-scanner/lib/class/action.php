<?php
class ActionClass {
    
    public $name;
    private $prettyName;
    private $printForm;

    public function __construct($name,$prettyName,$actionName,$printForm) {
        $this->name =$name;
        $this->printForm =$printForm;
        $this->prettyName =$prettyName;
        add_action("wp_malware_scanner_action_$name", $actionName);        
        if (isset($_POST["wp_malware_scanner_$name"])) {
            do_action("wp_malware_scanner_action_$name");
        }
    }

    public function printActionButton($text)
    {

        if ($this->printForm) {
            echo '<form action="#" method="post">';
            echo "<input type=\"hidden\" name=\"wp_malware_scanner_$this->name\" value=\"ok\">";
            echo "<input type=\"submit\" class=\"button button-primary\" value=\"$text\">";
            echo '</form>';
        }
        else {
            echo "<input type=\"hidden\" name=\"wp_malware_scanner_$this->name\" value=\"ok\">";
            echo "<input id=\"wp_malware_scanner_$this->name\" type=\"submit\" class=\"button button-primary\" value=\"$text\"></br>";
        }
        if (isset($_POST["wp_malware_scanner_$this->name"])) {
            echo "<p >(Updated)</p><br>";
        }
        echo '</br>';
        unset($_POST["wp_malware_scanner_$this->name"]);
    }

}
?>